---
title: "Mini-Project 2"
author: "Your Name Here"
date: "October 31, 2017"
output: html_document
---


## Loading the data

```{r, include=FALSE}

```

```{r,message=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")


library(tidyverse)
library(dplyr)



comparison <- contributions %>%
  full_join(candidates,by = "cand_id") %>% 
  select(cand_id, cand_ici, entity_type) %>%
  group_by(cand_ici) 
  
 

require(lubridate)
comparison<-comparison %>%
  mutate(transaction_date= mdy(`transaction_dt`)) %>%
  filter(transaction_date> "2010-01-01" & transaction_date <"2012-12-31")
#is.na(data) <- data==""




require(scales)
ggplot(data = comparison, aes(x = transaction_date, y = transaction_amt/1000000, color = entity_type)) +  
   geom_point() +
  guides(color = guide_legend("entity type")) +
 
  scale_x_date(labels =  date_format("%Y-%m"), date_breaks = "3 months") +
   labs(title = "change of transaction amount among between 2010 and 2012 on different entity type") +
  scale_y_continuous("transaction amount/million", labels = scales::dollar) +
  theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

```{r}
#comparison[comparison$entity_type==""] <- NA
comparison[is.na(comparison)] <- NA
```

join candidates with contributions by cand_id
compare cand_ici with entity_type
we want to see where the money is coming from for challengers vs incumbents vs open seats CAN = Candidate
CCM = Candidate Committee
COM = Committee
IND = Individual (a person)
ORG = Organization (not a committee and not a person)
PAC = Political Action Committee
PTY = Party Organization

  
